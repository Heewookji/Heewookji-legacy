---
layout: post
title: DNS로 IP 주소 찾기
toc: true
toc_sticky: true
toc_label: 목차
author_profile: true
read_time: true
comments: true
share: true
related: true
categories:
- Network
---

- IP 주소

브라우저는 URL을 해독하거나 HTTP 메시지를 만든 이후 OS에 의뢰해 액세스 대상의 웹 서버에 송신해야한다.

HTTP 프로토콜을 이용히여 통신할 경우, HTTP 프로토콜은 TCP/IP 기반 프로토콜이며 TCP/IP 네트워크는 

IP 주소로 통신 상대를 지정하기 떄문에 IP 주소를 알아야한다.

TCP/IP 네트워크는 서브넷이라는 작은 네트워크(허브에 연결된 PC들로 구성되어있다)들이 라우터로 연결된 

형태로 되어있다. 여기서 서브넷은 '동'(네트워크 번호)에 해당하고, PC는 '번지'(호스트 번호)에 해당하며

이 두 주소를 합쳐 IP 주소라고 한다. 

그림

- TCP/IP 란?

연결을 계속 유지하는 것을 서킷 방식의 통신이라고 하고, 패킷 단위로 보내는 것은 패킷 통신이라 한다.

인터넷은 패킷 통신을 기본으로 하고 있고, IP(Internet Protocol)가 패킷을 최대한 빨리 도착하도록

한다면 TCP(Transmission Control Protocol)는 IP 위에서 동작하며 데이터의 전달을 보증하고

순서대로 받게 해준다. HTTP, FTP, SMTP 등 많은 TCP 기반 프로토콜이 IP 위에서 동작하기 때문에

묶어서 TCP/IP 라고 한다.

- IP 주소의 구조

```
10.11.12.13

10.11.12.13/255.255.255.0 (IP 방식 넷마스크)

10.11.12.13/24 (비트 수 방식 넷마스크)

10.11.12.0  (서브넷 자체)

10.11.12.255 (브로드캐스트)
```

IP 주소는 네트워크와 호스트 번호를 합쳐 32비트로 나타내고 넷마스크에 따라 두 구역을 구분짓는다.

넷마스크는 왼쪽은 1, 오른쪽은 0이 나열된 값이며 1인 구역은 네트워크 번호를 나타내고, 0인 구역은

호스트 번호를 나타낸다. 위 예제의 경우 10.11.12 까지가 네트워크이며, 13 이 호스트 번호가 된다.

호스트 번호가 0인 경우 서브넷 자체를 의미하고, 255인 경우에는 서브넷에 있는 모든 PC에게 패킷을 보내는

브로드캐스트를 의미한다.

- Socket 라이브러리로 IP 주소 찾기

브라우저는 IP 주소를 알아내기 위해 DNS 서버에 요청을 보내는 클라이언트 동작을 하게된다.

DNS 클라이언트에 해당하는 것을 리졸버 (Socket 라이브러리에 있는 부품 중 하나)라고 하고, 

DNS 원리로 주소를 조사하는 것을 네임 리졸루션이라 한다.

브라우저에서는 해당 리졸버 메소드에 웹 서버 이름을 인자값으로 던져줌으로써 네임 리졸루션을 하게된다.

리졸버에서는 OS 내부에 포함된 프로토콜 스택을 호출하여 IP 주소 요청 메시지를 LAN 어댑터를 통해

DNS 서버(TCP/IP 설정에 적혀있는)로 보내고 반환된 값을 분석하여 IP 주소를 브라우저에게 돌려준다. 


