---
layout: single
title: 실수
toc: true
toc_sticky: true
toc_label: 목차
author_profile: true
read_time: true
comments: true
share: true
related: true
categories:
- ComputerScience
---


- 컴퓨터/컴파일러에 사용되는 통용된 실수 표기 방식 - IEEE754 표준

    - 이진수로 실수 표기

    - 부동 소수점을 통해 표기

    - 무한대, 비정규수, NAN(Not A Number)등의 특수 값 존재



- 실수의 이진법 표기

    - 1011.101의 경우 정수부는 2의 3제곱 + 2의 1제곱 + 2의 0제곱 = 11

    - 소수부 첫 자리는 1/2(2의 마이너스 1제곱)+ 1/8(2의 마이너스 세제곱) = 0.625

    - 최종적으로는 11.625가 된다.



- 부동소수점 표기(Floating-Point)

    - 실수 변수의 구성

|  부호 비트(Sign bit)            |  지수(Exponent)                 | 가수(Mantissa)          |
| :-------------------: | :-------------------: |:---------------:|
| 양수인지 음수인지 여부 | 소수점을 몇 칸 옮겼나? | 소수점을 옮긴 실수의 최상위 N개의 비트 |


고정 소수점(Fixed-Point)의 경우 소수점 위 X자리, 밑 Y자리의 형식으로 이해하기 쉬운 장점이 있지만,

정수부에 너무 많은 비트를 사용하는 경우 소수부의 정확도가 떨어지고, 소수부에 너무 많은 비트를 사용할 때는

큰 수는 표현할 수가 없어 결국 모든 경우를 만족시킬 수 없는 문제점을 가지고 있다.

따라서 이를 해결하기 위해 IEEE 754를 포함한 대부분의 실수 표준에서는 소수점을 옮기는 부동 소수점 표기를

따른다.

지수의 비트 크기는 표현할 수 있는 숫자의 범위(크기)를 정한다. 

가수의 비트 크기는 실수형이 표현하는 숫자의 정확도를 결정한다.  



- 자주 이용되는 실수형의 종류와 구성

| 자료형                | 부호비트                | 지수 비트          | 가수 비트| 지수 범위                    | 유효자릿수(십진수)|
| :---------------------: | :-------------------: |:---------------:| :------:   | :------------:      | :-------: |
| 32비트 실수형           | 1                    | 8               | 23      | -2의 7제곱+2~ 2의 7제곱 -1    | 6      |
| 64비트 실수형           | 1                    | 11               | 52     | -2의 10제곱+2~ 2의 10제곱 -1 | 15      |
| 80비트 실수형           | 1                    | 15               | 64     | -2의 14제곱+2~ 2의 14제곱 -1 | 18      |

 지수 범위에서 -1024~1023이 아닌 -1022~1023인 이유는 0.0일 경우와 무한대일 경우, 이 두가지 경우를 제하기 때문이다.


- 실수 비교하기

1/10 * 3과 3/10을 비교할 경우, 1/10은 참 값보다 조금 큰 값, 3/10은 참 값보다 조금 작은 값으로 근사되므로

비교가 실패하게 된다. 따라서 두 실수의 차이가 오차 이내일 경우, 값이 같다고 판단해야한다.

1. 절대 오차를 이용한다. 비교할 실수의 크기들에 비례한 오차 한도를 정한다.
    - 값이 매우 클 경우, 오차 또한 값에 비례해 정해져야한다. 같다고 판단해야 할 값 두 개를 비교하는 경우
    무의미한 오차(실수의 오차)의 가장 큰 값을 구한 뒤, 오차 한도의 하한 값을 그 위로 정한다.
    유의미한 오차(계산이 틀렸을 때 가정)의 가장 작은 값을 구해, 오차 한도의 상한 값을 그 아래로 정한다.

2. 상대 오차를 이용한다. 비교할 숫자들의 크기에 비례해 오차를 정한다.
    - 오차 한도를 미리 정할 수 없는 경우, 비교하는 숫자들의 크기에 비례해 오차를 정해야 한다.
    두 숫자의 크기에 비해 그 차이가 작다면 같다고 판정하는 방식이다. 두 수의 절대 차이가 매우 작을 경우, 추가로
    절대 오차를 이용해 참을 반환한다.


하지만 실수 연산으로도 정확하게 표현할 수 있는 값들이 있다. 가수부 안에 들어가는 정수의 경우 64비트 실수형의

가수부는 52비트이므로 절대 값이 2의 52승 보다 작은 정수들은 정확하게 표현 가능하다.

같은 원리로, 3.5와 같이 분모가 2의 거듭제곱인 유리수들도 정확하게 표현할 수 있다.


- 코드의 수치적 안정성(Numerically Stable)

실행 과정에서 발생하는 오차가 더 커지지 않는 프로그램이 수치적으로 안정적인 프로그램이다. 예컨데, 실수 연산 오차가

있었다고 해도 여러 횟수의 반복적인 작업을 통해 참 값에 아주 근접한 값을 반환할 수 있다.

이러한 수치적 안정성은 알고리즘의 특징에 따라 좌우된다.

- 실수 연산 제외하기

실수 연산에 복잡한 과정이 필요하므로, 문제에 약간의 변형을 가해 실수 연산을 제외할 수 있다.

