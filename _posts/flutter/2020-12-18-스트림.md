---
title: Stream
layout: post
tag: flutter
subtitle: 스트림에 대해 알아보자
tags:
- Stream
header-style: text
---

최근 사이드 프로젝트로 플러터 앱을 만들고 있는데, 다양한 아키텍쳐를 연습하고 싶었다.
그 중 하나인 Bloc 패턴에서는 스트림을 이용하고 있으므로, 사용 전 스트림에 대해 정리가 필요하여
미디엄 원문을 나름대로 이해하고 적어보고자 한다. 각종 의역과 오역이 있을 수 있습니다..

원문: https://medium.com/flutter-community/reactive-programming-streams-bloc-6f0d2bd2d248

### 스트림의 정의

2개의 끝이 있는 평범한 파이프 하나를 생각해보자. 파이프의 한쪽 끝은 오직 입력만 받을 수 있다.
입력한 무엇인가는 파이프를 흘러가 나머지 한쪽 끝으로 나오게 된다.
플러터에서 이 파이프가 바로 스트림이다. 스트림을 컨트롤하기 위해서 주로 StreamController를 사용한다.
스트림컨트롤러의 sink 프로퍼티로 StreamSink에 대해 접근이 가능한데 이 스트림싱크는 스트림의 입구를 제공한다.
스트림컨트롤러의 stream 프로퍼티에서는 내용물이 흘러나오는 출구를 제공한다.
스트림에서는 어떤 타입의 데이터든 (심지어 다른 스트림까지) 전달될 수 있다. 스트림에서 무엇인가가 전달되었다는
사실을 알기 위해서 우리는 그저 StreamControll의 stream 프로퍼티를 'listen'하기만 하면 된다.

리스너를 정의하면 StreamSubscription 객체를 받게된다. 스트림 레벨에서 무엇인가가 발생했다는 것을
바로 이 StreamSubscription 객체가 우리에게 알려준다. 적어도 하나 이상의 활성 상태 리스너가 있다면, 
스트림은 이 리스너에게 알려주기 위한 이벤트를 생성하기 시작하고, 그 상황들은 다음과 같다. 

- 무엇인가 데이터가 스트림에게서 흘러 나왔다.
- 에러가 스트림에 전송되었다.
- 스트림이 닫혔다.

StreamSubscription 객체는 우리에게 다음과 같은 기능을 제공한다.

- Stop listening
- pause
- resume

스트림은 단순한 파이프가 아니다. 파이프 밖으로 나가기 전 데이터들은 처리(processing)될 수 있다.
스트림 안에서 데이터를 처리하기 위해서 StreamTransformer를 사용한다. 이 메서드는 스트림 안의 데이터를
잡아채 무엇인가 기능을 수행하고, 결과를 같은 Stream 타입으로 내보낸다.
스트림 트랜스포머는 다음과 같은 어떤 타입의 처리에든지 사용될 수 있다.

- filtering : 어떤 상황에 기반한 데이터 필터링
- regrouping : 데이터 regroup
- modification : 데이터에 대한 어떠한 수정을 적용
- 데이터를 다른 스트림에 주입
- 버퍼링
- processing : 데이터에 기반하여 어떤 종류이든지 작업을 처리/수행한다.
- 기타..
